<!DOCTYPE html>
<html lang="es" class="light dark">

<head>

 <meta charset="UTF-8">
 <title>Geolocalización - Geo11:11 </title>

 <script src="js/registraServiceWorker.js"></script>

 <meta name="viewport" content="width=device-width">
 <meta name="theme-color" content="#fffbfe">
 <link rel="icon" sizes="16x16" href="favicon.ico">
 <link rel="manifest" href="site.webmanifest">
 <script src="ungap/custom-elements.js"></script>

 <script type="module" src="js/configura.js"></script>
 <link rel="stylesheet" href="css/estilos.css">
 <link rel="stylesheet" href="css/transicion_pestanas.css"> 

</head>

<body>

 <md-top-app-bar adicional="tab" headline="headline">

 

 </md-top-app-bar>

 <h1 id="headline">Geolocalización</h1>

 <nav-tab-fixed id="tab"></nav-tab-fixed>

 <main>
 
  <p>
    <label class="md-filled-text-field float">
      <output id="latitud">Cargando...</output>
     <span>Latitud</span>
    </label>
   </p>

   
  <p>
    <label class="md-filled-text-field float">
      <output id="longitud">Cargando...</output>
     <span>Longitud</span>
    </label>
   </p>
   
 </main>


 <script>
  navigator.geolocation.watchPosition(p => {
    document.getElementById('latitud').value = p.coords.latitude;
    document.getElementById('longitud').value = p.coords.longitude;
  });
</script>



<!--   //////////////////   -->


<h1>Servicio que procesa un formulario</h1>

<form onsubmit="procesaForm(event) ">

 <p>
  <label>
   Saludo:
   <!-- Como este input tiene name="saludo", su valor se recupera en el
    servidor con leeTexto("saludo") -->
   <input name="saludo">
  </label>
 </p>

 <p>
  <label>
   Nombre:
   <!-- Como este input tiene name="nombre", su valor se recupera en el
    servidor con leeTexto("nombre") -->
   <input name="nombre">
  </label>
 </p>

 <p><button type="submit">Procesa</button></p>

</form>

<script type="module">

 import { exportaAHtml } from "./lib/js/js/exportaAHtml.js"
 import { muestraError } from "./lib/js/js/muestraError.js"
 import { submitForm } from "./lib/js/js/submitForm.js"

 /**
  * @param {Event} event
  */
 async function procesaForm(event) {
  try {
   const respuesta =
    await submitForm(
     "srv/procesa.php", event)
   alert(respuesta.body)
  } catch (error) {
   muestraError(error)
  }
 }
 exportaAHtml(procesaForm)

</script>

</body>

</html>